const alphabets: Record<number, Record<string, string>> = {
	6: {
		"0110\n1001\n1001\n1111\n1001\n1001": "A",
		"1110\n1001\n1110\n1001\n1001\n1110": "B",
		"0110\n1001\n1000\n1000\n1001\n0110": "C",
		"1111\n1000\n1110\n1000\n1000\n1111": "E",
		"1111\n1000\n1110\n1000\n1000\n1000": "F",
		"0110\n1001\n1000\n1011\n1001\n0111": "G",
		"1001\n1001\n1111\n1001\n1001\n1001": "H",
		"0111\n0010\n0010\n0010\n0010\n0111": "I",
		"0011\n0001\n0001\n0001\n1001\n0110": "J",
		"1001\n1010\n1100\n1010\n1010\n1001": "K",
		"1000\n1000\n1000\n1000\n1000\n1111": "L",
		"0110\n1001\n1001\n1001\n1001\n0110": "O",
		"1110\n1001\n1001\n1110\n1000\n1000": "P",
		"1110\n1001\n1001\n1110\n1010\n1001": "R",
		"0111\n1000\n1000\n0110\n0001\n1110": "S",
		"1001\n1001\n1001\n1001\n1001\n0110": "U",
		"1000\n1000\n0101\n0010\n0010\n0010": "Y",
		"1111\n0001\n0010\n0100\n1000\n1111": "Z",
	},
	10: {
		"001100\n010010\n100001\n100001\n100001\n111111\n100001\n100001\n100001\n100001": "A",
		"111110\n100001\n100001\n100001\n111110\n100001\n100001\n100001\n100001\n111110": "B",
		"011110\n100001\n100000\n100000\n100000\n100000\n100000\n100000\n100001\n011110": "C",
		"111111\n100000\n100000\n100000\n111110\n100000\n100000\n100000\n100000\n111111": "E",
		"111111\n100000\n100000\n100000\n111110\n100000\n100000\n100000\n100000\n100000": "F",
		"011110\n100001\n100000\n100000\n100000\n100111\n100001\n100001\n100011\n011101": "G",
		"100001\n100001\n100001\n100001\n111111\n100001\n100001\n100001\n100001\n100001": "H",
		"000111\n000010\n000010\n000010\n000010\n000010\n000010\n100010\n100010\n011100": "J",
		"100001\n100010\n100100\n101000\n110000\n110000\n101000\n100100\n100010\n100001": "K",
		"100000\n100000\n100000\n100000\n100000\n100000\n100000\n100000\n100000\n111111": "L",
		"100001\n110001\n110001\n101001\n101001\n100101\n100101\n100011\n100011\n100001": "N",
		"111110\n100001\n100001\n100001\n111110\n100000\n100000\n100000\n100000\n100000": "P",
		"111110\n100001\n100001\n100001\n111110\n100100\n100010\n100001\n100001\n100001": "R",
		"100001\n100001\n010010\n010010\n001100\n001100\n010010\n010010\n100001\n100001": "X",
		"111111\n000001\n000001\n000010\n000100\n001000\n010000\n100000\n100000\n111111": "Z",
	},
};

export function ocr(matrix: number[][]): string {
	const height = matrix.length;

	const width = height === 6 ? 4 : 6;
	const space = height === 6 ? 1 : 2;

	const text = matrix.map((row) => row.join("")).join("\n");
	const letters: string[] = [];

	for (let i = 0; i < text.length; i += width + space) {
		const rows: string[] = [];

		for (const row of matrix) {
			rows.push(row.slice(i, i + width).join(""));
		}

		letters.push(alphabets[height][rows.join("\n")]);
	}

	return letters.join("");
}
